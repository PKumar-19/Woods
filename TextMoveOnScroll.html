<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Why Kasauli</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: Inter, system-ui, sans-serif;
  background: #d1d1d1;
  color: #111;
  overflow-x: hidden;
}

/* SCROLL AREA */
#hero {
  height: 260vh;
}

#sticky {
  position: sticky;
  top: 0;
  height: 100vh;
}

/* HERO CENTER */
.hero-center {
  height: 100%;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: 7vh;
  text-align: center;
}

.hero-inner {
  position: relative;
}

/* WHY */
#why {
  font-size: clamp(12px, 1.2vw, 14px);
  letter-spacing: 3px;
  text-transform: uppercase;
  opacity: 0.8;
  margin-bottom: 6px;
}

/* HERO WORD */
#heroWord {
  font-size: clamp(64px, 14vw, 220px);
  font-weight: 800;
  letter-spacing: -0.04em;
  display: inline-block;
  position: relative;
  z-index: 2;
}

/* DOCKED SENTENCE */
#sentence {
  position: absolute;
  bottom: 14%;
  left: 6vw;
  font-size: clamp(26px, 4vw, 56px);
  font-weight: 600;
  line-height: 1.15;
  opacity: 0;
}

#sentence-line {
  position: relative;
  height: 1em; /* creates vertical space for docking */
}

#dockPoint {
  display: inline-block;
}

/* ROTATING WORD */
#rotate {
  display: inline-block;
  margin-left: 5px;
}

/* RESPONSIVE */
@media (max-width: 768px) {
  #sentence {
    bottom: 18%;
    left: 5vw;
  }
}
</style>
</head>

<body>

<div id="hero">
  <div id="sticky">

    <!-- HERO -->
    <div class="hero-center">
      <div class="hero-inner">
        <div id="why">why</div>
        <span id="heroWord">Kasauli</span>
      </div>
    </div>

    <!-- FINAL SENTENCE -->
    <div id="sentence">
      <div>Invest in</div>
      <div id="sentence-line">
        <span id="dockPoint"></span>
      </div>
      <div><span id="rotate">wellness</span></div>
    </div>

  </div>
</div>

<script>
gsap.registerPlugin(ScrollTrigger);

const heroWord = document.getElementById("heroWord");
const dockPoint = document.getElementById("dockPoint");
const sticky = document.getElementById("sticky");

// Calculate the x/y offset relative to the sticky container
function getDockPosition() {
  const heroRect = heroWord.getBoundingClientRect();
  const dockRect = dockPoint.getBoundingClientRect();
  const stickyRect = sticky.getBoundingClientRect();
  return {
    x: dockRect.left - heroRect.left + (heroWord.offsetLeft - heroWord.getBoundingClientRect().left),
    y: dockRect.top - heroRect.top + (heroWord.offsetTop - heroWord.getBoundingClientRect().top)
  };
}

/* MAIN SCROLL TIMELINE */
const tl = gsap.timeline({
  scrollTrigger: {
    trigger: "#hero",
    start: "top top",
    end: "bottom bottom",
    scrub: 1.2,
    onUpdate: self => {
      // Check progress, if hero is docked, add 's', else remove it
      const docked = self.progress > 0.5; // adjust threshold as needed
      if (docked) {
        heroWord.textContent = "Kasauli's";
      } else {
        heroWord.textContent = "Kasauli";
      }
    }
  }
});

/* Fade WHY */
tl.to("#why", {
  opacity: 0,
  y: -12
}, 0);

/* Show sentence */
tl.to("#sentence", {
  opacity: 1
}, 0.2);

/* DOCK Kasauli on its OWN LINE */
tl.to(heroWord, {
  x: () => getDockPosition().x,
  y: () => getDockPosition().y,
  scale: 0.30,
  transformOrigin: "81% -10%",
  ease: "power2.inOut"
}, 0);

/* ROTATING WORDS */
const rotate = document.getElementById("rotate");
const words = ["Serenity", "Nature", "Wilderness", "AQI"];

const rotateTl = gsap.timeline({ repeat: -1, paused: true });

words.forEach(word => {
  rotateTl
    .to(rotate, { opacity: 0, y: -10, duration: 0.3 })
    .call(() => rotate.textContent = word)
    .to(rotate, { opacity: 1, y: 0, duration: 0.3 })
    .to({}, { duration: 1.2 });
});

ScrollTrigger.create({
  trigger: "#sentence",
  start: "top 80%",
  once: true,
  onEnter: () => rotateTl.play()
});
</script>

</body>
</html>